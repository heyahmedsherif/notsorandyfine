---
---

<div id="badge-display" class="mt-8">
  <div class="grid grid-cols-2 md:grid-cols-4 gap-4" id="badge-grid">
    <!-- Populated by JS -->
  </div>
  <div class="mt-6 text-center">
    <p class="text-gray-500 text-sm">
      Points: <span id="user-points" class="font-bold text-navy-800">0</span>
      &middot;
      Actions: <span id="user-actions" class="font-bold text-navy-800">0</span>
    </p>
  </div>
</div>

<script>
  import { getBadges, getStats } from '../scripts/gamification.js';

  function render() {
    const badges = getBadges();
    const stats = getStats();
    const grid = document.getElementById('badge-grid');
    const pointsEl = document.getElementById('user-points');
    const actionsEl = document.getElementById('user-actions');

    if (pointsEl) pointsEl.textContent = stats.points.toString();
    if (actionsEl) actionsEl.textContent = stats.totalActions.toString();

    if (!grid) return;
    grid.innerHTML = badges.map(badge => {
      const earned = stats.badges.includes(badge.id);
      return `
        <div class="card p-4 text-center ${earned ? '' : 'opacity-40 grayscale'}">
          <div class="text-3xl mb-2">${badge.icon}</div>
          <div class="font-semibold text-sm text-navy-800">${badge.name}</div>
          <div class="text-xs text-gray-500 mt-1">${badge.description}</div>
          ${earned ? '<div class="text-xs text-green-600 font-medium mt-1">Earned!</div>' : '<div class="text-xs text-gray-400 mt-1">Locked</div>'}
        </div>
      `;
    }).join('');
  }

  render();
  window.addEventListener('stats-updated', render);
</script>
